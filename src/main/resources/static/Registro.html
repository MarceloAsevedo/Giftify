<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giftify - Registro</title>
    <link rel="stylesheet" href="loginyregistro.css">
</head>
<body>
    <div class="contenedor">
        <div class="imagen"></div>
        <div class="formulario">
            <h1>GIFTIFY</h1>
            <h2>Registro</h2>
            <form id="registroForm" enctype="multipart/form-data">
                <label for="nombre">Nombre:</label>
                <input class="botones" type="text" placeholder="Ejemplo: Matias" id="nombre" name="nombre" required>

                <label for="apellido">Apellido:</label>
                <input class="botones" type="text" placeholder="Ejemplo: Fernandez" id="apellido" name="apellido" required>

                <label for="fechanacimiento">Fecha de nacimiento:</label>
                <input class="botones" type="date" id="fechanacimiento" name="fechanacimiento" required>

                <label for="mail">Correo electrónico:</label>
                <input class="botones" type="email" placeholder="Ejemplo: matiasfernandez@gmail.com" id="mail" name="mail" required>

                <label for="password">Contraseña:</label>
                <input class="botones" type="password" placeholder="Ejemplo: mati1234" id="password" name="password" required>

                <label for="repetirPassword">Repetir contraseña:</label>
                <input class="botones" type="password" placeholder="Ejemplo: mati1234" id="repetirPassword" name="repetirPassword" required>

                <label for="fotoPerfil">Foto de Perfil:</label>
                <input type="file" id="fotoPerfil" name="fotoPerfil" accept="image/*">

                <button type="submit">Registrarse</button>

                <h4><a href="login.html">¿Ya tienes cuenta?</a></h4>
            </form>
        </div>
    </div>
    <script>
 document.getElementById('registroForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const formData = new FormData();
    formData.append('nombre', document.getElementById('nombre').value);
    formData.append('apellido', document.getElementById('apellido').value);
    formData.append('fechaNacimiento', document.getElementById('fechanacimiento').value);
    formData.append('mail', document.getElementById('mail').value);
    formData.append('password', document.getElementById('password').value);
    formData.append('repetirPassword', document.getElementById('repetirPassword').value);
    const fotoPerfil = document.getElementById('fotoPerfil').files[0];
    if (fotoPerfil) {
        formData.append('fotoPerfil', fotoPerfil);
    }

    fetch('/registro/register', {
        method: 'POST',
        body: formData
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Error en el registro');
        }
        return response.json();
    })
    .then(data => {
        alert('Registro exitoso: ' + data.message);
        document.getElementById('registroForm').reset(); // Limpiar formulario
        window.location.href = 'login.html'; // Redirigir al login
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Error en el registro: ' + error.message);
    });
});


    </script>
</body>
</html>
